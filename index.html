<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Veo3 Video Generator</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input { padding: 10px; width: 300px; margin-right: 10px; }
    button { padding: 10px; }
    video { display: block; margin-top: 20px; max-width: 100%; }
  </style>
</head>
<body>
  <h1>Veo3 Text-to-Video</h1>
  <input id="prompt" placeholder="Enter your video prompt" />
  <button id="generate">Generate Video</button>
  <p id="status"></p>
  <video id="result" controls></video>

  <script>
    const API_KEY = "sk-4dea413565fb4e3faacc29a5324dfc66"; // <-- Paste your Veo3API key here

    async function generateVideo(prompt) {
      document.getElementById("status").textContent = "Submitting request...";
      // 1️⃣ Submit prompt to Veo3API
      const res = await fetch("https://veo3api.com/generate", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${API_KEY}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          prompt,
          model: "veo3-fast",
          duration: 5,
          watermark: "veo"
        })
      });

      const data = await res.json();
      const taskId = data.data.task_id;

      // 2️⃣ Poll for video completion
      async function poll() {
        document.getElementById("status").textContent = "Generating video...";
        const statusRes = await fetch(`https://veo3api.com/status/${taskId}`, {
          headers: {
            "Authorization": `Bearer ${API_KEY}`,
            "Content-Type": "application/json"
          }
        });

        const statusData = await statusRes.json();

        if (statusData.data.status === "completed") {
          document.getElementById("status").textContent = "Video ready!";
          return statusData.data.video_url;
        } else if (statusData.data.status === "failed") {
          throw new Error("Video generation failed");
        } else {
          await new Promise(r => setTimeout(r, 3000));
          return poll();
        }
      }

      return await poll();
    }

    document.getElementById("generate").addEventListener("click", async () => {
      const prompt = document.getElementById("prompt").value;
      try {
        const videoUrl = await generateVideo(prompt);
        document.getElementById("result").src = videoUrl;
      } catch (err) {
        document.getElementById("status").textContent = err.message;
      }
    });
  </script>
</body>
</html>
